{% extends "shopapp/base.html" %}


{% block title %}
    Products list
{% endblock %}


{% block main %}
    <style>
    .products-block {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        grid-row-gap: 10px;
    }
    .product-block {
        width: 180px;
        height: 190px;
        border: 2px black solid;
        border-radius: 5px;
        background-color: #cbf0ff;
        margin: 2px auto;
        padding: 5px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    .product-block p {
        margin: 1px auto;
        text-align: center;

    }
    .product-block img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    </style>

    <div >
        <h1>Products:</h1>

        {% if products %}
            <div class="products-block">
                {% for product in products %}
                    <div class="product-block">
                        <p><a href="{% url 'shopapp:product_details' pk=product.pk %}"
                        >Name: {{ product.name }}</a></p>
                        <p>Price: {{ product.price }}</p>
                        <p>Discount: {% firstof product.discount "no discount" %} </p>

                        {% if product.preview %}
                            <img src="{{ product.preview.url }}" alt="product.preview.name">
                        {% endif %}

                    </div>
                {% endfor %}
            </div>
        {% else %}
            <h3>No products yet</h3>
        {% endif %}</div>

    <div>
        {% if perms.shopapp.add_product %}
        	<a href="{% url 'shopapp:product_create' %}">Create a new product</a>
        {% endif %}
    </div>

{% endblock %}
