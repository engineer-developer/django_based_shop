{% extends "shopapp/base.html" %}


{% block title %}
    Orders list
{% endblock %}


{% block main %}
    <style>
        .order-block {
            border: 2px black solid;
            border-radius: 5px;
            background: #a5efa7;
            margin: 2px;
            padding: 2px;
            display: inline-grid;
        }
        h4 {
            color: red;
        }
    </style>

    <h1>Orders:</h1>
    <div>

        {% if orders %}
            {% for order in orders %}
                <div class="order-block">
                    <a  href="{% url "shopapp:order_details" pk=order.pk %}"><p>Order â„–{{ order.pk }}</p></a>
                    <p>Order by: {% firstof order.user.first_name order.user.username %} </p>
                    <p>Delivery address: {{ order.delivery_address }} </p>
                    <p>Promocode: <code>{% firstof order.promocode "None" %}</code> </p>
                    <p>Created at: {{ order.created_at }} </p>
                    <div>
                        Products in order:
                        <ul>
                            {% for product in order.products.all %}
                                <li>{{ product.name }} for ${{ product.price }}</li>
                            {% endfor %}

                        </ul>
                    </div>
                    <div>
                        <strong>Total price: ${{ order.total_price }}</strong>
                    </div>
                </div>
            {% endfor %}

        {% else %}
            <h4>No orders yet</h4>
        {% endif %}

    <div>
        <a href="{% url "shopapp:create_order" %}">
            Create a new order
        </a>
    </div>

    </div>
{% endblock %}
